<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>

    function sudoku2(grid) {
      const grid2 = []
      const grid3 = new Array(9)
      const length = grid.length
      for (let i = 0; i < length; i++) {
        const temp = []
        for (let j = 0; j < length; j++) {
          const char = grid[i][j]
          temp.push(grid[j][i])
          const m = 3 * Math.floor(i / 3) + Math.floor(j / 3)
          grid3[m] ? grid3[m].push(char) : grid3[m] = [char]
          if (char !== '.' && (grid[i].indexOf(char) !== grid[i].lastIndexOf(char))) {
            return false
          }
        }
        grid2.push(temp)
      }
      console.log(grid3)
      for (let i = 0; i < length; i++) {
        for (let j = 0; j < length; j++) {
          const char = grid2[i][j]
          if (char !== '.' && (grid2[i].indexOf(char) !== grid2[i].lastIndexOf(char))) {
            return false
          }
        }
      }
      for (let i = 0; i < length; i++) {
        for (let j = 0; j < length; j++) {
          const char = grid3[i][j]
          if (char !== '.' && (grid3[i].indexOf(char) !== grid3[i].lastIndexOf(char))) {
            return false
          }
        }
      }
      return true
    }

    const grid = [[".", ".", ".", "1", "4", ".", ".", "2", "."],
    [".", ".", "6", ".", ".", ".", ".", ".", "."],
    [".", ".", ".", ".", ".", ".", ".", ".", "."],
    [".", ".", "1", ".", ".", ".", ".", ".", "."],
    [".", "6", "7", ".", ".", ".", ".", ".", "9"],
    [".", ".", ".", ".", ".", ".", "8", "1", "."],
    [".", "3", ".", ".", ".", ".", ".", ".", "6"],
    [".", ".", ".", ".", ".", "7", ".", ".", "."],
    [".", ".", ".", "5", ".", ".", ".", "7", "."]]

    console.log(sudoku2(grid))

  </script>
</body>

</html>
